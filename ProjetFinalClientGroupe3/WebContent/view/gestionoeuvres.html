<!DOCTYPE html>
<html ng-app="myApp">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<div class="formulaire">
	<h2>{{msg}}</h2>


	<div ng-switch="varOeuvre">
		<div ng-switch-default="oeuvre">
			<h3>Ajouter une oeuvre</h3>
			
			<form class="form-horizontal">
			<div class="form-group">
				<label class="control-label col-sm-2" for="titre">Titre :</label>
				<div class="col-sm-10">
				 <input type="text"class="form-control" name="titre" value= "{{oeuvre.titre}}" ng-model="$root.oeuvre.titre"> 
				</div>
				</div>
			<div class="form-group">
				<label class="control-label col-sm-2" for="isbn">isbn :</label>
				<div class="col-sm-10">
				 <input type="text"class="form-control" name="isbn" value="{{oeuvre.isbn}}" ng-model="$root.oeuvre.isbn"> 
				</div>
				</div>
				 
			<div class="form-group">	
				 <label class="control-label col-sm-2">Auteur :</label>
				 <select class="col-sm-4" id="select1" ng-model="$root.lauteur" >
				 	
				 	<option ng-repeat="a in auteurs" value="{{a.idAuteur}}">{{a.prenom}} {{a.nom}}</option>
					
				</select>
				
				</div>
			
			
			<div class="form-group">
    			<div class="col-sm-offset-2 col-sm-10">
				<button class="btn btn-default" ng-click="validerOeuvre()">Valider</button>
			</div>	
			</div>
			</form>

<div ng-controller="allOeuvresCtrl">		
			<h3>Liste des oeuvres</h3>
			<table class="table table-striped">
				<tr>
					<th>Titre</th>
					<th>Auteur</th>
					<th>Nombre de livres disponibles</th>
					<th></th>
					<th></th>
					<th></th>
				</tr>
				<tr ng-repeat="o in oeuvres">
					<td>{{o.titre}}</td>
					<th>{{o.lauteur.prenom}} {{o.lauteur.nom}}</th>
					<td>{{o.nbLivreLibre}}</td>
					<td><a ng-click="ajouterLivre()">Ajouter/Modifier un livre</a></td>
					<td><a ng-click="editerOeuvre()">Editer</a></td>
					<td><a ng-click="supprimerOeuvre()">Supprimer</a></td>
				</tr>
			</table>
			</div>
		</div>
		
<!-- Ajouter Livre -->		
		<div ng-switch-when="livre">
			<h3>Ajouter un livre</h3>
			
			Oeuvre: {{oeuvre}}, Auteur: {{prenomAuteur}} {{nomAuteur}}
			<form class="form-horizontal">
			<div class="form-group">
				<label class="control-label col-sm-2" for="num"> Numéro d'inventaire:</label>
				<div class="col-sm-10">
				 <input type="text"class="form-control" name="num" value= "{{livre.numInventaire}}" ng-model="$root.livre.numInventaire"> 
				</div>
				</div>

			<div class="form-group">	
				 <label class="control-label col-sm-2">Disponibilité :</label>
				 <select class="col-sm-4" id="select1" ng-model="$root.livre.dispo" >
				 	
				 	<option value="true">Disponible</option>
				 	<option value="false">Indisponible</option>
					
				</select>
				
				</div>
				 
			<div class="form-group">	
				 <label class="control-label col-sm-2">Oeuvre :</label>
				 <select class="col-sm-4" id="select1" ng-model="$root.loeuvre" >
				 	
				 	<option ng-repeat="o in oeuvres" value="{{o}}">{{o.titre}}</option>
					
				</select>
				
				</div>
			
			
			<div class="form-group">
    			<div class="col-sm-offset-2 col-sm-10">
				<button class="btn btn-default" ng-click="validerLivre()">Valider</button>
			</div>	
			</div>
			</form>
			
	<div ng-controller="allLivresCtrl">	
			<h3>Liste des Livres</h3>
			<table class="table table-striped">
				<tr>
					<th>numInventaire</th>
					<th>Disponibilité</th>
					<th>Oeuvre</th>
					<th></th>
					<th></th>
				</tr>
				<tr ng-repeat="l in livres">
					<td>{{l.numInventaire}}</td>
					<td>{{l.dispo}}</td>
					<td>{{l.loeuvre.titre}}</td>
					<td><a ng-click="editerLivre()">Editer</a></td>
					<td><a ng-click="supprimerLivre()">Supprimer</a></td>
				</tr>
			</table>
			</div>
		</div>
	</div>
</div>
</html>